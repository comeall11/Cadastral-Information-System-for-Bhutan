<script type="text/javascript">
    $(document).ready(function () {
        $('#show_tharms_id').change(function () {
            $.post("/plot_thram", {
                tharm_id: $('#show_tharms_id option:selected').val(),
            }, function (res) {
                if (polygonLayer) {
                    map.removeLayer(polygonLayer)
                }
                var parcel = L.geoJSON(res, {
                    onEachFeature: function (feature, layer) {
                        layer.bindPopup(
                            "<table><tr>" +
                            "<td>District</td><td>" + feature.property.district + "</td>" +
                            "</tr><tr>" +
                            "<td>Gewog</td><td>" + feature.property.sub_district + "</td>" +
                            "</tr><tr>" +
                            "<td>Thram Number</td><td>" + feature.property.thram_no + "</td>" +
                            "</tr><tr>" +
                            "<td>Village Name</td><td>" + feature.property.village_name + "</td>" +
                            "</tr><tr>" +
                            "<td>Owner ID</td><td>" + feature.property.owner_id + "</td>" +
                            "</tr><tr>" +
                            "<td>Owner Name</td><td>" + feature.property.owner_name + "</td>" +
                            "</tr><tr>" +
                            "<td>Tenure Type</td><td>" + feature.property.tenure_type + "</td>" +
                            "</tr><tr>" +
                            "<td>Plot ID</td><td>" + feature.property.plot_id + "</td>" +
                            "</tr><tr>" +
                            "<td>Plot Area</td><td>" + feature.property.plot_area + "</td>" +
                            "</tr><tr>" +
                            "<td>Land Use</td><td>" + feature.property.land_use + "</td>" +
                            "</tr></table>"
                        )
                    }
                }).addTo(map);
                var bnd_parcel = parcel.getBounds()
                var center = bnd_parcel.getCenter();
                var zoom = map.getBoundsZoom(bnd_parcel);
                polygonLayer = parcel;
                map.setView(center, zoom);
            })
            return false;
        });
    });

</script>
<form action="#" name="form" id="form" method="post">
    <div class="form-group">
        <label>Select Thram</label>
        <select name="search_tharm" id="show_tharms_id" class="form-control">
            <option value="" selected="selected"></option>
            {% for cgewolg,cthram,cvillage in tharm %}
            <option value="{{cthram}}">{{cthram}}" of "{{cvillage}}</option>
            {% endfor %}
        </select>
    </div>
</form>